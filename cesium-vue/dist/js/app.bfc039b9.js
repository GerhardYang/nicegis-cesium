(function(e){function t(t){for(var i,l,o=t[0],r=t[1],c=t[2],d=0,h=[];d<o.length;d++)l=o[d],Object.prototype.hasOwnProperty.call(s,l)&&s[l]&&h.push(s[l][0]),s[l]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);u&&u(t);while(h.length)h.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],i=!0,o=1;o<a.length;o++){var r=a[o];0!==s[r]&&(i=!1)}i&&(n.splice(t--,1),e=l(l.s=a[0]))}return e}var i={},s={app:0},n=[];function l(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=i,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(a,i,function(t){return e[t]}.bind(null,i));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=r;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0919":function(e,t,a){},"0a14":function(e,t,a){},1:function(e,t){},"11cb":function(e,t,a){},1428:function(e,t,a){"use strict";var i=a("a0ba"),s=a.n(i);s.a},2:function(e,t){},"21ec":function(e,t,a){"use strict";var i=a("11cb"),s=a.n(i);s.a},"33d8":function(e,t,a){},"3ee7":function(e,t,a){},4694:function(e,t,a){},"46d3":function(e,t,a){},"4bf8":function(e,t,a){},"56d7":function(t,a,i){"use strict";i.r(a);i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menuDiv"},[a("LoginPanel"),a("Nav"),a("Footer")],1)},l=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"nav"},[a("div",{staticClass:"title"},[e._v(e._s(e.systitle))]),a("transition",{attrs:{name:"el-zoom-in-center"}},[a("ul",{staticClass:"transition-box"},[a("li",{ref:"position",class:e.panelVisiable.position?"active":"",on:{click:e.selectTab}},[a("span",{staticClass:"fa fa-map-marker"}),e._v("搜索定位 ")]),a("li",{ref:"roam",class:e.panelVisiable.roam?"active":"",on:{click:e.selectTab}},[a("span",{staticClass:"fa fa-eye"}),e._v("场景漫游 ")]),a("li",{ref:"layer",class:e.panelVisiable.layer?"active":"",on:{click:e.selectTab}},[a("span",{staticClass:"fa fa-list-ul"}),e._v("图层管理 ")]),a("li",{ref:"measure",class:e.panelVisiable.measure?"active":"",on:{click:e.selectTab}},[a("span",{staticClass:"fa fa-paper-plane"}),e._v("空间测量 ")]),a("li",{ref:"fly",class:e.panelVisiable.fly?"active":"",on:{click:e.selectTab}},[a("span",{staticClass:"fa fa-paper-plane"}),e._v("飞行控制 ")]),a("li",{ref:"set",class:e.panelVisiable.set?"active":"",on:{click:e.selectTab}},[a("span",{staticClass:"fa fa-cog fa-fw"}),e._v("系统设置 ")]),a("UserPanel")],1)])],1),a("RoamPanel",{directives:[{name:"show",rawName:"v-show",value:e.panelVisiable.roam,expression:"panelVisiable.roam"}]}),a("PositionPanel",{directives:[{name:"show",rawName:"v-show",value:e.panelVisiable.position,expression:"panelVisiable.position"}]}),a("LayersPanel",{directives:[{name:"show",rawName:"v-show",value:e.panelVisiable.layer,expression:"panelVisiable.layer"}]}),a("FlyPanel",{directives:[{name:"show",rawName:"v-show",value:e.panelVisiable.fly,expression:"panelVisiable.fly"}]}),a("SetPanel",{directives:[{name:"show",rawName:"v-show",value:e.panelVisiable.set,expression:"panelVisiable.set"}]}),a("MeasurePanel",{directives:[{name:"show",rawName:"v-show",value:e.panelVisiable.measure,expression:"panelVisiable.measure"}]}),a("div",{staticClass:"showOrHide"},[a("i",{staticClass:"el-icon-caret-top",attrs:{title:"显示或隐藏菜单栏"},on:{click:e.selectTab}})])],1)},r=[],c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"roam"},[a("div",{staticClass:"list-item"},[a("span",{staticClass:"list-name"},[e._v("视角")]),a("div",{staticClass:"item-btnbox"},[a("div",{staticClass:"item-btn globalbutton",on:{click:e.goGlobal}}),a("span",{staticClass:"item-name"},[e._v("全球")])]),a("div",{staticClass:"item-btnbox"},[a("div",{staticClass:"item-btn chinabutton",on:{click:e.goChina}}),a("span",{staticClass:"item-name"},[e._v("中国")])]),a("div",{staticClass:"item-btnbox"},[a("div",{staticClass:"item-btn custombutton",on:{click:e.goXiantao}}),a("span",{staticClass:"item-name"},[e._v("仙桃")])])])])},u=[],d={data:function(){return{}},methods:{goGlobal:function(){viewer.scene.camera.setView({destination:new Cesium.Cartesian3(-3562029.914602287,32488282.518908378,17550465.601298578),orientation:{heading:6.238247043526242,pitch:-1.5541732351377768,roll:0}})},goChina:function(){viewer.scene.camera.setView({destination:new Cesium.Cartesian3(-3652560.2263748404,10736334.378014784,6853762.231412497),orientation:{heading:6.238247043526242,pitch:-1.5541732351377768,roll:0}})},goXiantao:function(){viewer.scene.camera.setView({destination:new Cesium.Cartesian3(-2217097.4818491847,5098193.223853788,3256387.0467994795),orientation:{heading:6.238247043526242,pitch:-1.5541732351377768,roll:0}})}}},h=d,v=(i("d7e1"),i("2877")),p=Object(v["a"])(h,c,u,!1,null,"6735f7c2",null),f=p.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"position"},[a("div",{staticClass:"list-item"},[a("span",{staticClass:"list-name"},[e._v("搜索")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],staticClass:"search-box",attrs:{type:"text",id:"searchInput",placeholder:"请输入"},domProps:{value:e.input},on:{input:function(t){t.target.composing||(e.input=t.target.value)}}}),a("el-button",{staticClass:"search",attrs:{type:"danger",icon:"el-icon-search",plain:""},on:{click:e.gotoSearch}})],1),a("div",{staticClass:"list-item"},[a("span",{staticClass:"list-name"},[e._v("定位")]),a("div",{staticClass:"item-btnbox"},[a("div",{staticClass:"item-btn areabutton",on:{click:e.gotoArea}}),a("span",{staticClass:"item-name"},[e._v("区划")])]),a("div",{staticClass:"item-btnbox"},[a("div",{staticClass:"item-btn pointbutton",on:{click:e.gotoXYZ}}),a("span",{staticClass:"item-name"},[e._v("坐标")])])]),a("div",{staticClass:"list-item"},[a("div",{staticClass:"item-btnbox"},[a("div",{staticClass:"item-btn clearbutton",on:{click:e.clear}}),a("span",{staticClass:"item-name"},[e._v("清除")])])])])},b=[],y=(i("ac1f"),i("841c"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"area"},[a("el-tree",{ref:"tree",attrs:{data:e.data,"node-key":"id","default-expand-all":"","check-on-click-node":"","check-strictly":"","expand-on-click-node":!1},on:{"node-click":e.nodeClick}}),a("div",{staticClass:"pagination"},[a("el-pagination",{staticStyle:{"margin-left":"20px"},attrs:{small:"",layout:"total","page-size":15,total:e.total,"pager-count":5}}),a("el-pagination",{attrs:{small:"",layout:"prev,pager,next","page-size":15,total:e.total,"pager-count":5},on:{"current-change":e.currentChange}})],1)],1)}),C=[],g=(i("a4d3"),i("e01a"),i("d28b"),i("99af"),i("d3b7"),i("acd8"),i("3ca3"),i("ddb0"),{data:function(){return{data:[],total:0,fromIndex:0,toIndex:14,position:{x:113.45,y:30.37,z:50},entity:null}},props:{input:{type:String,default:function(){return{}}}},mounted:function(){this.searchPOI(this.fromIndex,this.toIndex)},methods:{searchPOI:function(e,t){var a=this;a.data=[];var i=window.sysconfig.POI;$.ajax({url:i.url+"/featureResults.json?returnContent=true&fromIndex=".concat(e,"&toIndex=").concat(t),type:"POST",data:JSON.stringify({datasetNames:["".concat(i.datasource,":").concat(i.dataset)],getFeatureMode:"SQL",queryParameter:{attributeFilter:"".concat(i.queryfield," like '%").concat(this.input,"%'")}}),contentType:!1,processData:!1,success:function(e){if(e.featureCount>0){a.total=e.totalCount;var t=a.arrSelect(e.features[0].fieldNames,i.queryfield),s=!0,n=!1,l=void 0;try{for(var o,r=e.features[Symbol.iterator]();!(s=(o=r.next()).done);s=!0){var c=o.value;a.data.push({id:"SUPERMAP"+c.ID,label:c.fieldValues[t],feature:c})}}catch(u){n=!0,l=u}finally{try{s||null==r.return||r.return()}finally{if(n)throw l}}}},error:function(e){}})},goPosition:function(e){var t=this,a=null,i=document.getElementById("bubble");scene.postRender.addEventListener((function(){if(a){var e=scene.canvas.height,t=new Cesium.Cartesian2;Cesium.SceneTransforms.wgs84ToWindowCoordinates(scene,a,t),i.style.bottom=e-t.y+45+"px",i.style.left=t.x-70+"px",i.style.visibility="visible"}}));var s=Cesium.Cartesian3.fromDegrees(parseFloat(this.position.x),parseFloat(this.position.y),parseFloat(this.position.z));a=s,$("#bubble").empty();var n=window.sysconfig.POI.showfield,l='<blockquote class="layui-elem-quote">',o=!0,r=!1,c=void 0;try{for(var u,d=n[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var h=u.value;for(var v in h){var p=t.arrSelect(e.fieldNames,v);l+="".concat(h[v],":").concat(e.fieldValues[p],"<br>")}}}catch(f){r=!0,c=f}finally{try{o||null==d.return||d.return()}finally{if(r)throw c}}l+="</blockquote>",$("#bubble").append(l),$("#bubble").show(),null!=this.entity&&viewer.entities.remove(this.entity),this.entity=viewer.entities.add({position:Cesium.Cartesian3.fromDegrees(parseFloat(this.position.x),parseFloat(this.position.y),parseFloat(this.position.z)),point:{pixelSize:5,color:Cesium.Color.RED,outlineColor:Cesium.Color.WHITE,outlineWidth:2}}),viewer.flyTo(this.entity,{offset:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-45),range:3e3}})},currentChange:function(e){var t=this.toIndex+1;this.searchPOI((e-1)*t,e*t-1)},nodeClick:function(e,t){var a=e.feature;this.position.x=a.geometry.center.x,this.position.y=a.geometry.center.y,this.goPosition(a)},arrSelect:function(e,t){for(var a=0;a<e.length;a++)if(e[a]==t)return a;return-1}}}),w=g,x=(i("78f6"),Object(v["a"])(w,y,C,!1,null,"efa3c5b0",null)),_=x.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xyz"},[a("div",[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.position.x,callback:function(t){e.$set(e.position,"x",t)},expression:"position.x"}},[a("template",{slot:"prepend"},[e._v("经度:")])],2)],1),a("br"),a("div",[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.position.y,callback:function(t){e.$set(e.position,"y",t)},expression:"position.y"}},[a("template",{slot:"prepend"},[e._v("纬度:")])],2)],1),a("br"),a("div",[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.position.z,callback:function(t){e.$set(e.position,"z",t)},expression:"position.z"}},[a("template",{slot:"prepend"},[e._v("高度:")])],2)],1),a("br"),a("el-row",{staticClass:"row"},[a("el-button",{attrs:{type:"info"},on:{click:e.goPosition}},[e._v("定位")]),a("el-button",{attrs:{type:"danger"},on:{click:e.reSet}},[e._v("重置")])],1)],1)},S=[],E=(i("470b"),{data:function(){return{position:{x:113.45,y:30.37,z:50},entity:null}},methods:{reSet:function(){this.position.x=113.45,this.position.y=30.37,this.position.z=50,$("#bubble").hide()},goPosition:function(){var e=null,t=document.getElementById("bubble");window.scene.postRender.addEventListener((function(){if(e){var a=scene.canvas.height,i=new Cesium.Cartesian2;Cesium.SceneTransforms.wgs84ToWindowCoordinates(window.scene,e,i),t.style.bottom=a-i.y+45+"px",t.style.left=i.x-70+"px",t.style.visibility="visible"}}));var a=Cesium.Cartesian3.fromDegrees(parseFloat(this.position.x),parseFloat(this.position.y),parseFloat(this.position.z));e=a,$("#bubble").show(),null!=this.entity&&window.viewer.entities.remove(this.entity),this.entity=window.viewer.entities.add({position:Cesium.Cartesian3.fromDegrees(parseFloat(this.position.x),parseFloat(this.position.y),parseFloat(this.position.z)),point:{pixelSize:5,color:Cesium.Color.RED,outlineColor:Cesium.Color.WHITE,outlineWidth:2}}),window.viewer.flyTo(this.entity,{offset:{heading:Cesium.Math.toRadians(0),pitch:Cesium.Math.toRadians(-45),range:3e3}})}}}),V=E,I=(i("dd3e"),Object(v["a"])(V,k,S,!1,null,"c917d8ec",null)),P=I.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"area"},[a("el-tree",{ref:"tree",attrs:{data:e.data,"node-key":"id","default-expand-all":"","check-on-click-node":"","check-strictly":"","expand-on-click-node":!1},on:{"node-click":e.nodeClick}})],1)},O=[],F=(i("cb29"),{data:function(){return{data:[],i:0}},mounted:function(){this.data.push(window.sysconfig.division)},watch:{"$store.state.config":function(){this.data.push(window.sysconfig.division)}},methods:{nodeClick:function(e,t){viewer.dataSources.removeAll();viewer.scene.camera,viewer.scene.canvas;var a=Cesium.GeoJsonDataSource.load(e.geojson);a.then((function(e,t){viewer.dataSources.add(e);for(var a=e.entities.values,i=0;i<a.length;i++){var s=a[i];s.polygon.fill=!1,s.polygon.hight=100,s.polygon.extrudedHeight=10,s.polygon.outline=!0,s.polygon.outlineColor=Cesium.Color.RED,s.polygon.outlineWidth=10}})),viewer.flyTo(a)}}}),L=F,T=(i("cd25"),Object(v["a"])(L,M,O,!1,null,"3679e2ec",null)),N=T.exports,H={data:function(){return{input:"",layerIndex:{search:null,area:null,xyz:null}}},mounted:function(){var e=this;$("#searchInput").keypress((function(t){13==t.keyCode&&e.gotoSearch()}))},methods:{gotoSearch:function(){var e=this;null!=this.layerIndex.search&&this.$layer.close(this.layerIndex.search),this.layerIndex.search=this.$layer.iframe({content:{content:_,parent:this,data:{input:this.input}},cancel:function(){e.layerIndex.search=null,viewer.dataSources.removeAll()},shade:!1,shadeClose:!1,maxmin:!1,scrollbar:!1,resize:!1,area:["200px","510px"],offset:[145,400],title:"搜索结果"})},gotoArea:function(){var e=this;null==this.layerIndex.area&&(this.layerIndex.area=this.$layer.iframe({content:{content:N,parent:this,data:{}},cancel:function(){e.layerIndex.area=null,viewer.dataSources.removeAll()},shade:!1,shadeClose:!1,maxmin:!1,scrollbar:!1,resize:!1,area:["300px","600px"],offset:[165,460],title:"区划定位"}))},gotoXYZ:function(){var e=this;null==this.layerIndex.xyz&&(this.layerIndex.xyz=this.$layer.iframe({content:{content:P,parent:this,data:{}},cancel:function(){e.layerIndex.xyz=null,$("#bubble").hide()},shade:!1,shadeClose:!1,maxmin:!1,scrollbar:!1,resize:!1,area:["300px","300px"],offset:[170,300],title:"坐标定位"}))},clear:function(){$("#bubble").empty(),$("#bubble").hide(),window.viewer.dataSources.removeAll(),window.viewer.entities.removeAll()}}},j=H,z=(i("5ba3"),Object(v["a"])(j,m,b,!1,null,"03aa2f16",null)),D=z.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"roam"},[a("div",{staticClass:"list-item"},[a("span",{staticClass:"list-name"},[e._v("图层管理")]),a("div",{staticClass:"item-btnbox"},[a("div",{staticClass:"item-btn laterbutton",on:{click:e.openLayersControler}}),a("span",{staticClass:"item-name"},[e._v("图层控制")])]),e._m(0)])])},A=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item-btnbox"},[a("div",{staticClass:"item-btn addbutton"}),a("span",{staticClass:"item-name"},[e._v("添加")])])}],W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layers"},[a("el-tree",{ref:"layers",attrs:{data:e.data,"node-key":"id","default-expand-all":"","check-on-click-node":"","default-checked-keys":e.defaultCheckKeys,"expand-on-click-node":"","show-checkbox":""},on:{"check-change":e.handleCheckChange,"node-click":e.nodeClick}})],1)},q=[],K=(i("7db0"),{data:function(){return{data:[],defaultCheckKeys:[]}},mounted:function(){var e=!0,t=!1,a=void 0;try{for(var i,s=window.sysconfig.scenes[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var n=i.value;n.isInitScene&&this.defaultCheckKeys.push(n.id)}}catch(h){t=!0,a=h}finally{try{e||null==s.return||s.return()}finally{if(t)throw a}}this.data=window.sysconfig.scenes;var l=!0,o=!1,r=void 0;try{for(var c,u=this.data[Symbol.iterator]();!(l=(c=u.next()).done);l=!0){var d=c.value;d.checked&&(this.defaultCheckKeys.push(d.id),this.addLayer(d.sceneurl))}}catch(h){o=!0,r=h}finally{try{l||null==u.return||u.return()}finally{if(o)throw r}}},methods:{nodeClick:function(e,t){this.addLayer(e.sceneurl)},addLayer:function(t){try{var a=viewer.cesiumWidget,i=scene.open(t);Cesium.when(i,(function(e){scene.layers.find("Config")}),(function(){var t="加载SCP失败，请检查网络连接状态或者url地址是否正确？";a.showErrorPanel(t,void 0,e)}))}catch(e){if(widget._showRenderLoopErrors){var s="渲染时发生错误，已停止渲染。";widget.showErrorPanel(s,void 0,e)}}},handleCheckChange:function(){}}}),U=K,B=(i("8eb2"),Object(v["a"])(U,W,q,!1,null,"2b352e74",null)),J=B.exports,X={data:function(){return{layerid:{layer:null}}},mounted:function(){},methods:{openLayersControler:function(){var e=this;null==this.layerid.layer&&(this.layerid.layer=this.$layer.iframe({area:["300px","600px"],offset:[160,450],title:"图层控制",shade:!1,shadeClose:!1,maxmin:!1,scrollbar:!1,resize:!1,content:{content:J,parent:this,data:{}},cancel:function(){e.layerid.layer=null}}))}}},G=X,Y=(i("733e"),Object(v["a"])(G,R,A,!1,null,"52e717fa",null)),Z=Y.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"roam"},[a("div",{staticClass:"list-item"},[a("span",{staticClass:"list-name"},[e._v("测量")]),a("div",{staticClass:"item-btnbox"},[a("div",{staticClass:"item-btn distancebutton",on:{click:e.distance}}),a("span",{staticClass:"item-name"},[e._v("距离")])]),a("div",{staticClass:"item-btnbox"},[a("div",{staticClass:"item-btn areabutton",on:{click:e.area}}),a("span",{staticClass:"item-name"},[e._v("面积")])]),a("div",{staticClass:"item-btnbox"},[a("div",{staticClass:"item-btn heightbutton",on:{click:e.height}}),a("span",{staticClass:"item-name"},[e._v("高度")])])]),a("div",{staticClass:"list-item"},[a("div",{staticClass:"item-btnbox"},[a("div",{staticClass:"item-btn clearbutton",on:{click:e.clear}}),a("span",{staticClass:"item-name"},[e._v("清除")])])])])},ee=[],te=(i("a9e3"),i("b680"),{data:function(){return{handlerDis:null,handlerArea:null,handlerHeight:null}},methods:{distance:function(){var e=0,t=(viewer.cesiumWidget,new Cesium.MeasureHandler(viewer,Cesium.MeasureMode.Distance,e));this.handlerDis=t,t.measureEvt.addEventListener((function(e){var a=Number(e.distance),i=a>1e3?(a/1e3).toFixed(2)+"km":a.toFixed(2)+"m";t.disLabel.text="距离:"+i})),t.activeEvt.addEventListener((function(e){1==e?(viewer.enableCursorStyle=!1,viewer._element.style.cursor="",$("body").removeClass("measureCur").addClass("measureCur")):(viewer.enableCursorStyle=!0,$("body").removeClass("measureCur"))})),this.deactiveAll(t),t&&t.activate()},area:function(){var e=0,t=(viewer.cesiumWidget,new Cesium.MeasureHandler(viewer,Cesium.MeasureMode.Area,e));this.handlerArea=t,t.measureEvt.addEventListener((function(e){var a=Number(e.area),i=a>1e6?(a/1e6).toFixed(2)+"km²":a.toFixed(2)+"㎡";t.areaLabel.text="面积:"+i})),t.activeEvt.addEventListener((function(e){1==e?(viewer.enableCursorStyle=!1,viewer._element.style.cursor="",$("body").removeClass("measureCur").addClass("measureCur")):(viewer.enableCursorStyle=!0,$("body").removeClass("measureCur"))})),this.deactiveAll(t),t&&t.activate()},height:function(){viewer.cesiumWidget;var e=new Cesium.MeasureHandler(viewer,Cesium.MeasureMode.DVH);this.handlerHeight=e,e.measureEvt.addEventListener((function(t){var a=t.distance>1e3?(t.distance/1e3).toFixed(2)+"km":t.distance+"m",i=t.verticalHeight>1e3?(t.verticalHeight/1e3).toFixed(2)+"km":t.verticalHeight+"m",s=t.horizontalDistance>1e3?(t.horizontalDistance/1e3).toFixed(2)+"km":t.horizontalDistance+"m";e.disLabel.text="空间距离:"+a,e.vLabel.text="垂直高度:"+i,e.hLabel.text="水平距离:"+s})),e.activeEvt.addEventListener((function(e){1==e?(viewer.enableCursorStyle=!1,viewer._element.style.cursor="",$("body").removeClass("measureCur").addClass("measureCur")):(viewer.enableCursorStyle=!0,$("body").removeClass("measureCur"))})),this.deactiveAll(e),e&&e.activate()},clear:function(){this.handlerDis&&this.handlerDis.clear(),this.handlerArea&&this.handlerArea.clear(),this.handlerHeight&&this.handlerHeight.clear()},deactiveAll:function(e){e&&e.deactivate()}}}),ae=te,ie=(i("d1db"),Object(v["a"])(ae,Q,ee,!1,null,"7b7a61ac",null)),se=ie.exports,ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"roam"},[a("div",{staticClass:"list-item"},[a("span",{staticClass:"list-name"},[e._v("路线选择")]),a("el-select",{attrs:{placeholder:"请选择飞行路线"},on:{change:e.select},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"list-item"},[a("span",{staticClass:"list-name"},[e._v("飞行管理")]),a("div",{staticClass:"item-btnbox"},[a("div",{staticClass:"item-btn playbutton",on:{click:e.play}}),a("span",{staticClass:"item-name"},[e._v("开始")])]),a("div",{staticClass:"item-btnbox"},[a("div",{staticClass:"item-btn pausebutton",on:{click:e.pause}}),a("span",{staticClass:"item-name"},[e._v("暂停")])]),a("div",{staticClass:"item-btnbox"},[a("div",{staticClass:"item-btn stopbutton",on:{click:e.stop}}),a("span",{staticClass:"item-name"},[e._v("停止")])])]),a("div",{staticClass:"list-item"},[a("span",{staticClass:"list-name"},[e._v("线路站点")]),a("div",{staticClass:"item-btnbox"},[a("el-switch",{attrs:{"active-color":"#CC0033","inactive-color":"#444"},on:{change:e.line},model:{value:e.showline,callback:function(t){e.showline=t},expression:"showline"}}),a("span",{staticClass:"item-name"},[e._v("路线")])],1),a("div",{staticClass:"item-btnbox"},[a("el-switch",{attrs:{"active-color":"#CC0033","inactive-color":"#444"},on:{change:e.station},model:{value:e.showstation,callback:function(t){e.showstation=t},expression:"showstation"}}),a("span",{staticClass:"item-name"},[e._v("站点")])],1)])])},le=[],oe=(i("b0c0"),{data:function(){return{showline:!0,showstation:!0,options:[],value:"",routes:null,flyManager:null,currentRoute:null}},mounted:function(){for(var e=window.sysconfig.fpf,t=0;t<e.length;t++){var a={};a.label=e[t].name,a.value=t,a.path=e[t].path,this.options.push(a)}null!==this.currentRoute&&(this.currentRoute.isLineVisible=!1,this.currentRoute.isStopVisible=!1),this.routes=new Cesium.RouteCollection(viewer.entities),this.flyManager=new Cesium.FlyManager({scene:viewer.scene,routes:this.routes})},methods:{select:function(e){var t=this,a=window.sysconfig.fpf,i=a[e].path,s=this.routes;s.fromFile(i);var n=this.flyManager;n.routes=s,n.stopArrived.addEventListener((function(e){e.waitTime=0})),n.readyPromise.then((function(){var e=n.currentRoute;e.isLineVisible=!0,e.isStopVisible=!0,t.currentRoute=e})),this.flyManager=n},play:function(){null!==this.flyManager?this.flyManager&&this.flyManager.play():this.$layer.alert("请先选择飞行路线！")},pause:function(){null!==this.flyManager?this.flyManager&&this.flyManager.pause():this.$layer.alert("请先选择飞行路线！")},stop:function(){null!==this.flyManager?this.flyManager&&this.flyManager.stop():this.$layer.alert("请先选择飞行路线！")},line:function(e){null!==this.flyManager?this.currentRoute.isLineVisible=e:this.$layer.alert("请先选择飞行路线！")},station:function(e){null!==this.flyManager?this.currentRoute.isStopVisible=e:this.$layer.alert("请先选择飞行路线！")}}}),re=oe,ce=(i("7314"),Object(v["a"])(re,ne,le,!1,null,"75b0df8e",null)),ue=ce.exports,de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"set"},[a("div",{staticClass:"list-item"},[a("span",{staticClass:"list-name"},[e._v("控件显隐")]),a("div",{staticClass:"item-btnbox"},[a("div",{staticClass:"item-btn navbutton",on:{click:e.toggleNav}}),a("span",{staticClass:"item-name"},[e._v("罗盘")])]),a("div",{staticClass:"item-btnbox"},[a("div",{staticClass:"item-btn fpsbutton",on:{click:e.toggleFPS}}),a("span",{staticClass:"item-name"},[e._v("帧率")])]),a("div",{staticClass:"item-btnbox"},[a("div",{staticClass:"item-btn mousebutton",on:{click:e.toggleFooter}}),a("span",{staticClass:"item-name"},[e._v("状态栏")])])]),a("div",{staticClass:"list-item"},[a("span",{staticClass:"list-name"},[e._v("图层颜色校正")]),a("div",{staticClass:"slide-group"},[a("div",{staticClass:"slide-top"},[a("el-slider",{attrs:{step:e.setp,max:1},on:{input:e.changeBrightness},model:{value:e.sliderValue.brightness,callback:function(t){e.$set(e.sliderValue,"brightness",t)},expression:"sliderValue.brightness"}}),a("label",{staticClass:"slide-label"},[e._v("亮度")])],1)]),a("div",{staticClass:"slide-group"},[a("div",{staticClass:"slide-top"},[a("el-slider",{attrs:{step:e.setp,max:1},on:{input:e.changeHue},model:{value:e.sliderValue.hue,callback:function(t){e.$set(e.sliderValue,"hue",t)},expression:"sliderValue.hue"}}),a("label",{staticClass:"slide-label"},[e._v("色调")])],1)]),a("div",{staticClass:"slide-group"},[a("div",{staticClass:"slide-top"},[a("el-slider",{attrs:{step:e.setp,max:1},on:{input:e.changeContrast},model:{value:e.sliderValue.contrast,callback:function(t){e.$set(e.sliderValue,"contrast",t)},expression:"sliderValue.contrast"}}),a("label",{staticClass:"slide-label"},[e._v("对比度")])],1)]),a("div",{staticClass:"slide-group"},[a("div",{staticClass:"slide-top"},[a("el-slider",{attrs:{step:e.setp,max:1},on:{input:e.changeSaturation},model:{value:e.sliderValue.saturation,callback:function(t){e.$set(e.sliderValue,"saturation",t)},expression:"sliderValue.saturation"}}),a("label",{staticClass:"slide-label"},[e._v("饱和度")])],1)]),a("div",{staticClass:"item-btnbox"},[a("div",{staticClass:"item-btn resetlbutton",on:{click:e.reSet}}),a("span",{staticClass:"item-name"},[e._v("重置")])])])])},he=[],ve={data:function(){return{sliderValue:{brightness:1,contrast:1,hue:0,saturation:1},setp:.01}},methods:{reSet:function(){this.sliderValue.brightness=1,this.sliderValue.contrast=1,this.sliderValue.hue=0,this.sliderValue.saturation=1},toggleNav:function(){var e=document.getElementsByClassName("cesium-viewer-navigationContainer"),t=window.getComputedStyle(e[0]).display;e[0].style.display="block"==t?"none":"block"},toggleFPS:function(){viewer.scene.debugShowFramesPerSecond=!viewer.scene.debugShowFramesPerSecond},toggleFooter:function(){$("#footer").toggle()},changeBrightness:function(e){var t=scene.colorCorrection;t.show=!0,t.brightness=parseFloat(e)},changeHue:function(e){var t=scene.colorCorrection;t.show=!0,t.hue=parseFloat(e)},changeContrast:function(e){var t=scene.colorCorrection;t.show=!0,t.contrast=parseFloat(e)},changeSaturation:function(e){var t=scene.colorCorrection;t.show=!0,t.saturation=parseFloat(e)}}},pe=ve,fe=(i("8a23"),Object(v["a"])(pe,de,he,!1,null,"7b2d7923",null)),me=fe.exports,be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[a("ul",[a("li",{on:{click:e.info}},[e._v("欢迎您: "+e._s(e.userName))])])])},ye=[],Ce={data:function(){return{userName:"",loginTime:"",layerIndex:{user:null}}},mounted:function(){var e=this;window.addEventListener("setItem",(function(t){var a=t.key;"userName"==a&&(e.userName=t.newValue),"loginTime"==a&&(e.loginTime=t.newValue)}))},methods:{info:function(){var e=this;null!=this.layerIndex.user&&this.$layer.close(this.layerIndex.user),this.layerIndex.user=this.$layer.confirm("<p>当前登录用户:".concat(this.userName,"</p>\n        <br/>\n        <p>本次登录时间:").concat(this.loginTime,"</p>"),{title:"用户信息",btn:["退出系统","取消"],shade:!1,shadeClose:!1,cancel:function(){e.layerIndex.user=null}},(function(t){e.$layer.msg("欢迎使用！"),e.$layer.close(t),setTimeout((function(){e.$addStorageEvent(2,"isLogon",!1)}),1e3)}))}}},ge=Ce,we=(i("21ec"),Object(v["a"])(ge,be,ye,!1,null,"8fb31538",null)),xe=we.exports,_e={data:function(){return{systitle:"",panelVisiable:{roam:!1,position:!0,layer:!1,fly:!1,set:!1,measure:!1}}},mounted:function(){this.systitle=window.sysconfig.systitle},components:{RoamPanel:f,PositionPanel:D,LayersPanel:Z,MeasurePanel:se,FlyPanel:ue,SetPanel:me,UserPanel:xe},methods:{selectTab:function(e){switch(e.target.innerText){case"场景漫游":for(var t in this.panelVisiable)this.panelVisiable[t]=!1;this.panelVisiable.roam=!0,$("#container").css("top","135px"),$(".showOrHide").show();break;case"搜索定位":for(var a in this.panelVisiable)this.panelVisiable[a]=!1;this.panelVisiable.position=!0,$("#container").css("top","135px"),$(".showOrHide").show();break;case"图层管理":for(var i in this.panelVisiable)this.panelVisiable[i]=!1;this.panelVisiable.layer=!0,$("#container").css("top","135px"),$(".showOrHide").show();break;case"空间测量":for(var s in this.panelVisiable)this.panelVisiable[s]=!1;this.panelVisiable.measure=!0,$("#container").css("top","135px"),$(".showOrHide").show();break;case"飞行控制":for(var n in this.panelVisiable)this.panelVisiable[n]=!1;this.panelVisiable.fly=!0,$("#container").css("top","135px"),$(".showOrHide").show();break;case"系统设置":for(var l in this.panelVisiable)this.panelVisiable[l]=!1;this.panelVisiable.set=!0,$("#container").css("top","135px"),$(".showOrHide").show();break;case"":for(var o in this.panelVisiable)this.panelVisiable[o]=!1;$("#container").css("top","40px"),$(".showOrHide").hide();break;default:break}}}},ke=_e,Se=(i("7b6d"),Object(v["a"])(ke,o,r,!1,null,"78523ea5",null)),$e=Se.exports,Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"footer"}},[a("div",{attrs:{id:"copyright"}},[a("span",[e._v(e._s(e.copyright))])]),a("div",{attrs:{id:"states"}},[a("span",[e._v(e._s(e.stateInfos.lng))]),a("span",[e._v(e._s(e.stateInfos.lat))]),a("span",[e._v(e._s(e.stateInfos.height))]),a("span",[e._v(e._s(e.stateInfos.heading))]),a("span",[e._v(e._s(e.stateInfos.roll))]),a("span",[e._v(e._s(e.stateInfos.pitch))])])])},Ve=[],Ie={data:function(){return{copyright:"",stateInfos:{lng:null,lat:null,height:null,heading:null,roll:null,pitch:null}}},mounted:function(){var e=this.stateInfos;this.copyright=window.sysconfig.copyright,this.handleMOUSE_MOVE(e,viewer),this.handleWHEEL(e,viewer)},methods:{handleMOUSE_MOVE:function(e,t){var a=new Cesium.ScreenSpaceEventHandler(t.scene.canvas);a.setInputAction((function(a){var i=t.camera.pickEllipsoid(a.endPosition,t.scene.globe.ellipsoid);if(void 0!=i){var s=t.scene.globe.ellipsoid.cartesianToCartographic(i);e.lng=Cesium.Math.toDegrees(s.longitude),e.lng=e.lng>0?"经度：".concat(e.lng.toFixed(3),"°E"):"经度：".concat(-e.lng.toFixed(3),"°W"),e.lat=Cesium.Math.toDegrees(s.latitude),e.lat=e.lat>0?"纬度：".concat(e.lat.toFixed(3),"°N"):"纬度：".concat(-e.lat.toFixed(3),"°S"),e.height=Math.ceil(t.camera.positionCartographic.height),e.height=e.height>1e3?"相机高度：".concat(e.height/1e3,"Km"):"相机高度：".concat(e.height,"m"),e.heading=t.camera.heading;var n=e.heading/(2*Math.PI)*360;e.heading="方位角：\n        ".concat((360==n?0:n).toFixed(2),"°"),e.roll=t.camera.roll;var l=e.roll/(2*Math.PI)*360;e.roll="翻滚角：\n        ".concat((360==l?0:l).toFixed(2),"°"),e.pitch=t.camera.pitch,e.pitch="俯仰角：\n        ".concat((e.pitch/(2*Math.PI)*360).toFixed(2),"°")}}),Cesium.ScreenSpaceEventType.MOUSE_MOVE)},handleWHEEL:function(e,t){new Cesium.ScreenSpaceEventHandler(t.scene.canvas).setInputAction((function(){e.height=Math.ceil(t.camera.positionCartographic.height),e.height=e.height>1e3?"相机高度：".concat(e.height/1e3,"Km"):"相机高度：".concat(e.height,"m")}),Cesium.ScreenSpaceEventType.WHEEL)}}},Pe=Ie,Me=(i("1428"),Object(v["a"])(Pe,Ee,Ve,!1,null,"2d0ceede",null)),Oe=Me.exports,Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isShow?a("div",[a("div",{staticClass:"title"},[e._v(e._s(e.systitle))]),a("div",{staticClass:"loginpanel"},[a("div",{staticClass:"login"},[a("br"),a("el-input",{attrs:{placeholder:"  登录用户名"},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),a("br"),a("br"),a("br"),a("el-input",{attrs:{"show-password":"",placeholder:"  登录密码"},model:{value:e.pwd,callback:function(t){e.pwd=t},expression:"pwd"}}),a("br"),a("br"),a("br"),a("el-row",{staticClass:"row"},[a("el-button",{attrs:{type:"danger"},on:{click:e.login}},[e._v("登录")]),a("el-button",{attrs:{type:"info"},on:{click:e.reSet}},[e._v("重置")])],1)],1)]),a("div",{staticClass:"container"})]):e._e()},Le=[],Te={data:function(){return{systitle:"",isShow:!0,userName:"",pwd:""}},mounted:function(){var e=this;e.systitle=window.sysconfig.systitle,document.title="欢迎使用:"+e.systitle,window.addEventListener("setItem",(function(t){var a=t.key;"isLogon"==a&&"false"==t.newValue&&(e.isShow=!0)}))},methods:{login:function(){"admin"==this.userName&&"admin"==this.pwd&&(this.$addStorageEvent(2,"userName",this.userName),this.$addStorageEvent(2,"loginTime",(new Date).toLocaleString()),this.$addStorageEvent(2,"isLogon",!0),this.isShow=!1,$("#container").show())},reSet:function(){this.username="",this.pwd=""}}},Ne=Te,He=(i("7763"),Object(v["a"])(Ne,Fe,Le,!1,null,"0d59ddc2",null)),je=He.exports,ze={components:{Nav:$e,Footer:Oe,LoginPanel:je}},De=ze,Re=(i("7faf"),Object(v["a"])(De,n,l,!1,null,null,null)),Ae=Re.exports,We=(i("1f54"),i("d842")),qe=i.n(We),Ke=(i("2ba8"),i("5c96")),Ue=i.n(Ke);i("0fae"),i("6672"),i("0a14");s["default"].prototype.$layer=qe()(s["default"]),s["default"].use(Ue.a),s["default"].config.productionTip=!1,s["default"].prototype.$addStorageEvent=function(e,t,a){if(1===e){var i=document.createEvent("StorageEvent"),s={setItem:function(e,t){localStorage.setItem(e,t),i.initStorageEvent("setItem",!1,!1,e,null,t,null,null),window.dispatchEvent(i)}};return s.setItem(t,a)}i=document.createEvent("StorageEvent");var n={setItem:function(e,t){sessionStorage.setItem(e,t),i.initStorageEvent("setItem",!1,!1,e,null,t,null,null),window.dispatchEvent(i)}};return n.setItem(t,a)},new s["default"]({render:function(e){return e(Ae)}}).$mount("#app"),$(".loading").remove()},"5ba3":function(e,t,a){"use strict";var i=a("af30"),s=a.n(i);s.a},6672:function(e,t,a){},"6beb":function(e,t,a){},7314:function(e,t,a){"use strict";var i=a("6beb"),s=a.n(i);s.a},"733e":function(e,t,a){"use strict";var i=a("bd1a"),s=a.n(i);s.a},7763:function(e,t,a){"use strict";var i=a("46d3"),s=a.n(i);s.a},"78f6":function(e,t,a){"use strict";var i=a("4bf8"),s=a.n(i);s.a},"7b6d":function(e,t,a){"use strict";var i=a("ba94"),s=a.n(i);s.a},"7faf":function(e,t,a){"use strict";var i=a("b8ff"),s=a.n(i);s.a},"8a23":function(e,t,a){"use strict";var i=a("c9ac"),s=a.n(i);s.a},"8eb2":function(e,t,a){"use strict";var i=a("33d8"),s=a.n(i);s.a},"9f6e":function(e,t,a){},a0ba:function(e,t,a){},af30:function(e,t,a){},b8ff:function(e,t,a){},ba94:function(e,t,a){},bd1a:function(e,t,a){},c9ac:function(e,t,a){},cd25:function(e,t,a){"use strict";var i=a("3ee7"),s=a.n(i);s.a},d1db:function(e,t,a){"use strict";var i=a("0919"),s=a.n(i);s.a},d7e1:function(e,t,a){"use strict";var i=a("9f6e"),s=a.n(i);s.a},dd3e:function(e,t,a){"use strict";var i=a("4694"),s=a.n(i);s.a}});